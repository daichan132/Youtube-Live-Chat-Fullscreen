---
name: git-workflow
description: このリポジトリ向けの安全な Git 操作手順。差分確認、ステージ、分割、ブランチ状態確認を求められたときに使う。レビューしやすいコミットを作る手順。良い粒度でコミットしたい、履歴を整理したい、と言われたときに使う。
---

# 目的
- 安全性を保ちながら、差分の粒度と履歴の可読性を維持する。
- 変更意図が追えるコミットを、最小の混在で作る。

# 手順

## 1. 状態確認
- `git status -sb`
- `git diff --stat`
- 必要箇所だけ `git diff -- <path>`

## 2. 関心ごとで分割
- runtime / e2e / docs など、関心ごとにファイルをグルーピングする。

## 3. 意図的にステージ
- `git add <対象ファイル>`
- `git diff --cached` でステージ内容を確認。

## 4. コミット
- `git commit -m "<type>(<scope>): <summary>"`
- 各単位ごとに繰り返す。

## 5. 仕上げ確認
- `git status -sb`
- `git log --oneline -n <件数>`

# メッセージ方針
- 何がどう変わったかを明示する。
- ユーザー要望があれば日本語で書く。

# ガードレール
- 明示依頼なしに破壊的操作（reset/restore）をしない。
- 無関係差分を同じコミットに混ぜない。

# 出力形式
- ブランチ状態
- ステージ対象
- コミット一覧（sha / message / scope）
- コミット前リスク
